(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{656:function(e,t,o){"use strict";o.r(t);var s=o(38),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("p",[e._v("Rules define particular token lifetimes for a given combination of grant type, user, and scope. They are evaluated in priority order and once a matching rule is found no other rules are evaluated. If no matching rule is found, then the authorization request fails.")]),e._v(" "),o("ol",[o("li",[e._v("In the Developer Console, navigate to "),o("strong",[e._v("API > Authorization Servers")]),e._v(".")]),e._v(" "),o("li",[e._v("Select the name of an authorization server, and then select "),o("strong",[e._v("Access Policies")]),e._v(".")]),e._v(" "),o("li",[e._v("Select the name of an access policy, and then select "),o("strong",[e._v("Add Rule")]),e._v(".")]),e._v(" "),o("li",[e._v("Enter a "),o("strong",[e._v("Name")]),e._v(" for the rule, and then use the following fields to define the rule logic:\n"),o("ul",[o("li",[o("strong",[e._v("IF Grant type is:")]),e._v(" Select one or more OAuth 2.0 "),o("RouterLink",{attrs:{to:"/docs/concepts/oauth-openid/#choosing-an-oauth-2-0-flow"}},[e._v("grant types")]),e._v(".")],1),e._v(" "),o("li",[o("strong",[e._v("AND User is:")]),e._v(" Select whether there's no user (client credentials flow), a user assigned to a client that's assigned to this rule's policy, or a user assigned to one or more groups that you specify or a list of users that you specify.")]),e._v(" "),o("li",[o("strong",[e._v("AND Scopes requested:")]),e._v(" Select the scopes (any scopes or a list that you specify) that the user can request as part of the rule conditions.")]),e._v(" "),o("li",[o("strong",[e._v("THEN Use this inline hook:")]),e._v("  Select an "),o("RouterLink",{attrs:{to:"/docs/concepts/inline-hooks/"}},[e._v("Inline Hook")]),e._v(", if any, that you want to use to customize the token returned by Okta API Access Management.")],1),e._v(" "),o("li",[o("strong",[e._v("THEN Access token lifetime is:")]),e._v(" Select the length of time before an access token expires.")]),e._v(" "),o("li",[o("strong",[e._v("THEN Refresh token lifetime is:")]),e._v(" Select the length of time before a refresh token expires.")])])]),e._v(" "),o("li",[e._v("Click "),o("strong",[e._v("Create Rule")]),e._v(".")])]),e._v(" "),o("p",[e._v("Rules are evaluated in priority order, so the first rule in the first policy that matches the client request is applied and no further processing occurs. If you need to change the order of your rules, reorder the rules using drag-n-drop.")]),e._v(" "),o("blockquote",[o("p",[o("strong",[e._v("Note:")]),e._v(" Service applications (client credentials flow) have no user. If you use this flow, make sure that you have at least one rule that specifies the condition "),o("strong",[e._v("No user")]),e._v(".")])]),e._v(" "),o("h3",{attrs:{id:"rule-use"}},[e._v("Rule Use "),o("a",{staticClass:"header-anchor header-link",attrs:{href:"#rule-use"}},[o("svg",{attrs:{viewBox:"0 0 512 512"}},[o("path",{attrs:{fill:"currentColor",d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"}})])])]),e._v(" "),o("p",[e._v('Access policy rules are whitelists. If you want to create granular rules, you must first ensure that you have no rules that match "any" of something (for example "any user"). You can then create specific rules for each specific use case that you do want to support. For example, if you wanted to ensure that only administrators using the implicit flow were granted access, then you would create a rule specifying that if:')]),e._v(" "),o("ul",[o("li",[e._v("a request is made using the "),o("code",[e._v("implicit")]),e._v(" grant type, and")]),e._v(" "),o("li",[e._v("the user is a member of the "),o("code",[e._v("admin")]),e._v(" group, and")]),e._v(" "),o("li",[e._v("any scope is specified")])]),e._v(" "),o("p",[e._v("Then the access token that is granted has a lifetime of, for example, one hour.")]),e._v(" "),o("p",[e._v("You can also use rules to restrict grant types, users, or scopes. For example, you could prevent the use of all scopes other than "),o("code",[e._v("openid")]),e._v(" and "),o("code",[e._v("offline_access")]),e._v(" by only creating rules that specifically mention those two scopes. This means you would have to:")]),e._v(" "),o("ol",[o("li",[e._v('Not create any rules that match "any scopes", and')]),e._v(" "),o("li",[e._v("Ensure that all of your rules only match the "),o("code",[e._v("openid")]),e._v(" and/or "),o("code",[e._v("offline_access")]),e._v(" scopes.")])]),e._v(" "),o("p",[e._v("Any request that is sent with a different scope won't match any rules and will consequently fail.")]),e._v(" "),o("p",[e._v("At this point you can keep reading to find out how to create custom scopes and claims or proceed immediately to "),o("RouterLink",{attrs:{to:"/docs/guides/customize-authz-server/test-authz-server/"}},[e._v("Testing your Authorization Server")]),e._v(".")],1),e._v(" "),o("NextSectionLink")],1)}),[],!1,null,null,null);t.default=r.exports}}]);