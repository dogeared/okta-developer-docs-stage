(window.webpackJsonp=window.webpackJsonp||[]).push([[197],{718:function(e,t,a){"use strict";a.r(t);var s=a(38),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("Create an OAuth service app and register the public key with the service app using the dynamic client registration endpoint ("),a("code",[e._v("/oauth/v1/clients")]),e._v("). Then grant the scopes that you want to allow for the service app.")]),e._v(" "),a("h2",{attrs:{id:"create-a-service-app"}},[e._v("Create a service app "),a("a",{staticClass:"header-anchor header-link",attrs:{href:"#create-a-service-app"}},[a("svg",{attrs:{viewBox:"0 0 512 512"}},[a("path",{attrs:{fill:"currentColor",d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"}})])])]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Use the following POST example to create your service app using the "),a("code",[e._v("/oauth2/v1/clients")]),e._v(" endpoint and provide values for these parameters:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("client_name")]),e._v(" — Name of the service app")]),e._v(" "),a("li",[a("code",[e._v("grant_types")]),e._v(" — "),a("code",[e._v("client_credentials")])]),e._v(" "),a("li",[a("code",[e._v("token_endpoint_auth_method")]),e._v(" — "),a("code",[e._v("private_key_jwt")])]),e._v(" "),a("li",[a("code",[e._v("application_type")]),e._v(" — "),a("code",[e._v("service")])]),e._v(" "),a("li",[a("code",[e._v("jwks")]),e._v(" — Add the JSON Web Key Set (JWKS) that you created in the "),a("GuideLink",{attrs:{link:"../create-publicprivate-keypair"}},[e._v("last step")]),e._v(".")],1)])])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("    "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" -X POST "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n    -H "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Accept: application/json'")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n    -H "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Authorization: SSWS '),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("${api_token}")]),e._v('"')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n    -H "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Content-Type: application/json'")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n    -d "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('\' {\n        "client_name": "Service Client Name",\n        "response_types": [\n          "token"\n        ],\n        "grant_types": [\n          "client_credentials"\n       ],\n        "token_endpoint_auth_method": "private_key_jwt",\n        "application_type": "service",\n        "jwks": {\n              "keys": [\n                     {\n                       "kty": "RSA",\n                       "e": "AQAB",\n                       "use": "sig",\n                       "kid": "O4O",\n                       "alg": "RS256",\n                       "n": "u0VYW2-76A_lYg5NQihhcPJYYU9-NHbNaO6LFERWnOUbU7l3MJdmCailwSzjO76O-2GdLE-Hn2kx04jWCCPofnQ8xNmFScNo8UQ1dKVq0UkFK-sl-Z0Uu19GiZa2fxSWwg_1g2t-ZpNtKCI279xGBi_hTnupqciUonWe6CIvTv0FfX0LiMqQqjARxPS-6fdBZq8WN9qLGDwpjHK81CoYuzASOezVFYDDyXYzV0X3X_kFVt2sqL5DVN684bEbTsWl91vV-bGmswrlQ0UVUq6t78VdgMrj0RZBD-lFNJcY7CwyugpgLbnm4HEJmCOWJOdjVLj3hFxVVblNJQQ1Z15UXw"\n                       }\n                     ]\n           }\n    }\'')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"https://'),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("${yourOktaDomain}")]),e._v('/oauth2/v1/clients"')]),e._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[e._v("Make note of the "),a("code",[e._v("client_id")]),e._v(" that is returned in the response. You need that to grant scopes to your service app and when you create and sign the JWT.")])]),e._v(" "),a("h3",{attrs:{id:"grant-allowed-scopes"}},[e._v("Grant allowed scopes "),a("a",{staticClass:"header-anchor header-link",attrs:{href:"#grant-allowed-scopes"}},[a("svg",{attrs:{viewBox:"0 0 512 512"}},[a("path",{attrs:{fill:"currentColor",d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"}})])])]),e._v(" "),a("p",[e._v("When a request is sent to the Okta Org Authorization Server's "),a("code",[e._v("/token")]),e._v(" endpoint, it validates all of the requested scopes in the request against the service app's grants collection. The scope is granted if the scope exists in the service app's grants collection.")]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("Note:")]),e._v(" You can find a list of available values for "),a("code",[e._v("scopeId")]),e._v(" on the "),a("RouterLink",{attrs:{to:"/docs/guides/implement-oauth-for-okta/scopes/"}},[e._v("Scopes and supported endpoints")]),e._v(" page.")],1)]),e._v(" "),a("p",[e._v("Now that you've created the service app and registered the public key with that service app, you need to define the allowed scopes.")]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("Note:")]),e._v(" Only the Super Admin role has permissions to grant scopes to an app.")])]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Use the "),a("code",[e._v("/grants")]),e._v(" API to add a grant for an allowed scope to your service app. The POST example request below creates a grant for the "),a("code",[e._v("okta.users.read")]),e._v(" scope.")])]),e._v(" "),a("li",[a("p",[e._v("Provide values for these parameters in your request:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("scopeID")]),e._v(" — "),a("code",[e._v("okta.users.read")])]),e._v(" "),a("li",{attrs:{yourOktaDomain:""}},[a("code",[e._v("issuer")]),e._v(" — "),a("code",[e._v("https://")])])])])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" -X POST "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n  -H "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Accept: application/json'")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n  -H "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Authorization: SSWS '),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("${api_token}")]),e._v('"')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n  -H "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Content-Type: application/json'")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n  -d "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('\'{\n      "scopeId": "okta.users.read",\n      "issuer": "https://{yourOktaDomain}"\n  }\'')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"https://'),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("${yourOktaDomain}")]),e._v('/api/v1/apps/{serviceappclient_id}/grants"')]),e._v("\n")])])]),a("blockquote",[a("p",[a("strong",[e._v("Note:")]),e._v(" You can also use the Developer Console to grant allowed scopes to your service app on the "),a("strong",[e._v("Okta API Scopes")]),e._v(" tab. Click "),a("strong",[e._v("Grant")]),e._v(" for each of the scopes that you want to add to the application's grant collection.")])]),e._v(" "),a("NextSectionLink")],1)}),[],!1,null,null,null);t.default=n.exports}}]);