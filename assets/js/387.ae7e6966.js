(window.webpackJsonp=window.webpackJsonp||[]).push([[387],{464:function(e,t,a){"use strict";a.r(t);var i=a(38),s=Object(i.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("div",{staticStyle:{"font-size":"0.9em","margin-bottom":"-20px"}},[a("a",{attrs:{href:"/books/api-security/tls/"}},[e._v("← Transport Layer Security")])]),e._v(" "),a("h2",{attrs:{id:"tls-how"}},[e._v("Establishing a SSL/TLS Session "),a("a",{staticClass:"header-anchor header-link",attrs:{href:"#tls-how"}},[a("svg",{attrs:{viewBox:"0 0 512 512"}},[a("path",{attrs:{fill:"currentColor",d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"}})])])]),e._v(" "),a("p",[e._v("When an SSL/TLS connection needs to be made between a client (a browser, or an application attempting to access an API) and a server (a web server, for example, or an API endpoint) it follows a number of steps. The TLS spec, published by the IETF Transport Layer Security Working Group, gives an overview of these steps.")]),e._v(" "),a("p",[e._v("In "),a("a",{staticClass:"figref",attrs:{href:"#fig_tls_sequence_diagram"}}),e._v(' we show a visual representation of how the client or "sender" and server or "receiver" set up an SSL/TLS connection.')]),e._v(" "),a("p",[e._v("Let's walk through the steps at a high level:")]),e._v(" "),a("p",[a("strong",[e._v("TCP Connection")])]),e._v(" "),a("p",[e._v("Your client (browser or application) will initiate a TCP connection with the server. Your client and server can exchange information once this connection is established. Although TLS can work over different transports, by far the most common use case is over TCP/IP, due to its ubiquity, reliability of transport and ability to recover from lost packets and transport errors. In the diagram, SYN, SYN ACK, and ACK denote this sequence of events.")]),e._v(" "),a("p",[a("strong",[e._v("SSL/TLS Handshake")])]),e._v(" "),a("p",[e._v("The SSL/TLS handshake takes place once a TCP connection is established.")]),e._v(" "),a("p",[a("img",{attrs:{src:"/img/books/api-security/tls/images/tls-sequence-diagram.png",alt:"TLS Sequence Diagram",title:"TLS Sequence Diagram"}})]),e._v(" "),a("p",[a("strong",[e._v("ClientHello")])]),e._v(" "),a("p",[e._v('The client sends a "ClientHello" message, which lists the versions of SSL/TLS the client is capable of, what ciphersuites it has available, and any compression types available.')]),e._v(" "),a("div",{staticClass:"break-before"}),e._v("\n**ServerHello and Certificate Response**\n"),a("p",[e._v("The server responds with the same information as the client, and sends the server's certificate back to the client as well.")]),e._v(" "),a("p",[a("strong",[e._v("Certificate Verification")])]),e._v(" "),a("p",[e._v('The client verifies that the certificate is valid, and also verifies that the server is authentic and not an impersonator conducting a man-in-the-middle attack. For more information about how certificate verification is accomplished, see "SSL/TLS Certificate Verification" later in this chapter.')]),e._v(" "),a("p",[a("strong",[e._v("ClientKeyExchange")])]),e._v(" "),a("p",[e._v("In the previous section, we discussed key exchange, with the example Diffie–Hellman algorithm. This is the step of the handshake where the key exchange actually happens.")]),e._v(" "),a("p",[a("strong",[e._v("Finished/Application Data")])]),e._v(" "),a("p",[e._v("Now that the handshake has been established and keys have been exchanged, information may be encrypted and decrypted between the client and server based on the shared secret which has been generated. This symmetric cryptography will secure the remainder of application-to-application communication.")])])}),[],!1,null,null,null);t.default=s.exports}}]);