<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Token Inline Hook Reference | Okta Developer</title>
    <meta name="generator" content="VuePress 1.5.4">
    <script src="https://www.okta.com/sites/all/modules/okta_coveo_search_developer/js/lib/CoveoJsSearch.Lazy.min.js?20200128" defer="true"></script>
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/manifest.json">
  <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg">
  <script src="https://developer.okta.com/sites/all/modules/okta_coveo_search_developer/js/lib/CoveoJsSearch.Lazy.min.js?20200228" defer="true"></script>
  <link rel="preload" href="https://use.typekit.net/osg6paw.css" as="style" crossorigin="true">
  <link rel="stylesheet" href="https://use.typekit.net/osg6paw.css" crossorigin="true">
  <link rel="stylesheet" href="https://developer.okta.com/sites/all/modules/okta_coveo_search_developer/css/okta_coveo_search_developer.css?20200128">
  <meta name="msapplication-config" content="/favicon/browserconfig.xml">
  <link rel="stylesheet" href="https://www.okta.com/sites/all/modules/okta_coveo_search_developer/css/okta_coveo_search_developer.css?20200128">
  <meta http-equiv="XA-UA-Compatible" content="IE=edge">
  <script>

      var isProduction = window.location.hostname === 'developer.okta.com';
      if (isProduction) {

        // START Google Tag Manager
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-KXMLV58');
        // END Google Tag Manager

      }
    </script>
  <script>
      var $buoop = {required:{e:-4,f:-3,o:-3,s:-1,c:-3},insecure:true,api:2020.09, text: { 'msg': 'Your web browser ({brow_name}) is not supported. For the best site experience, we recommend updating your browser. <br> <a{up_but}>Update browser</a> <a{ignore_but}>Ignore</a>' } };
      function $buo_f(){
      var e = document.createElement("script");
      e.src = "//browser-update.org/update.min.js";
      document.body.appendChild(e);
      };
      try {document.addEventListener("DOMContentLoaded", $buo_f,false)}
      catch(e){window.attachEvent("onload", $buo_f)}
    </script>
    <meta name="description" content="Secure, scalable, and highly available authentication and user management for any app.">
    <meta name="msapplication-config" content="/favicon/browserconfig.xml">
    <meta http-equiv="XA-UA-Compatible" content="IE=edge">
    <link rel="preload" href="/assets/css/12.styles.58af9967.css" as="style"><link rel="preload" href="/assets/js/app.97e20113.js" as="script"><link rel="preload" href="/assets/js/286.5ad5d4ac.js" as="script"><link rel="preload" href="/assets/js/302.8832545f.js" as="script"><link rel="preload" href="/assets/js/301.33c4bfb3.js" as="script"><link rel="preload" href="/assets/js/295.020bfe96.js" as="script"><link rel="preload" href="/assets/js/278.9ab268b5.js" as="script"><link rel="preload" href="/assets/js/284.2ecc6fd0.js" as="script"><link rel="preload" href="/assets/js/298.ba603004.js" as="script"><link rel="preload" href="/assets/js/288.b3f1512a.js" as="script"><link rel="preload" href="/assets/js/873.9c5ae40d.js" as="script"><link rel="preload" href="/assets/js/291.797a3451.js" as="script"><link rel="preload" href="/assets/js/283.caea532a.js" as="script"><link rel="preload" href="/assets/js/297.f905e08d.js" as="script">
    <link rel="stylesheet" href="/assets/css/12.styles.58af9967.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="fixed-header"><div><nav class="top-bar-nav container"><a href="https://developer.okta.com/" class="top-bar-nav--logo"><svg viewBox="0 0 431.9 151.4"><path d="M102.2 41.4c-21 0-38.1 17.1-38.1 38.1s17.1 38.1 38.1 38.1 38.1-17.1 38.1-38.1-17.1-38.1-38.1-38.1zm0 57.1c-10.5 0-19-8.5-19-19s8.5-19 19-19 19 8.5 19 19c.1 10.5-8.4 19-18.9 19.1 0 0-.1 0-.1-.1zM169.1 92.3c0-1.9 1.5-3.4 3.4-3.4.9 0 1.8.4 2.4 1 9.5 9.7 25.3 26.3 25.4 26.4.4.5.8.8 1.4.9l1.6.2h17.2c1.8 0 3.3-1.4 3.4-3.2 0-.8-.3-1.5-.8-2.2l-28.6-29.2-1.5-1.5c-3.2-3.9-2.9-5.4.8-9.3l22.6-25.1c1.1-1.4.8-3.5-.6-4.6-.6-.4-1.3-.7-2-.7h-17c-.6.2-1.1.5-1.5.9L175 64.4c-1.3 1.4-3.4 1.5-4.8.2-.7-.6-1.1-1.5-1.1-2.5V18.9c0-1.7-1.3-3-3-3h-13c-2.2 0-3.3 1.5-3.3 2.8v95.8c0 2.2 1.8 2.8 3.3 2.8h12.7c1.7.1 3.2-1.2 3.3-2.9V92.3zM273 114l-1.4-12.8c-.2-1.7-1.7-2.9-3.4-2.7h-.1l-2.9.2c-10.1 0-18.5-7.9-19-18V64.2c-.1-2 1.5-3.6 3.5-3.7h17c1.7-.1 3.1-1.5 3-3.2V45.2c0-2.3-1.5-3.6-2.8-3.6h-17.1c-1.9.1-3.5-1.5-3.6-3.4V18.9c-.1-1.7-1.5-3.1-3.2-3H230.2c-1.6-.1-3 1.1-3.1 2.7v62.2c.5 21 17.9 37.6 38.9 37 1.4 0 2.9-.2 4.3-.3 1.7-.3 2.9-1.8 2.7-3.5zM364.7 98c-10.8 0-12.4-3.8-12.4-18.3V44.8c0-1.8-1.4-3.2-3.2-3.2h-12.9c-1.8 0-3.2 1.4-3.3 3.2v1.6C314.6 36 291.3 42.5 281 60.8c-10.4 18.3-3.9 41.6 14.4 51.9 14 7.9 31.4 6.2 43.5-4.2 3.6 5.5 9.3 9.1 18.3 9.1 1.5 0 9.7.3 9.7-3.5v-13.6c.1-1.3-.9-2.4-2.2-2.5zm-50.5.6c-10.5 0-19-8.5-19-19s8.5-19 19-19 19 8.5 19 19-8.5 19-19 19zM19.4 74c2.2-1.9 4.1-4.1 5.7-6.6 3.5-5.3 5.4-11.5 5.2-17.9V27c0-4.9.9-8.4 2.7-10.5 1.8-2.1 4.8-3 9.2-3h12.6c1.2 0 2.1-.9 2.2-2.1V2.2C57 1 56 0 54.8 0H41.5c-7.8 0-12.9 2.1-18 7.6s-7.1 12.3-7.1 21.7v14.2c0 2.2-.1 4-.2 5.7v2.2c-.5 3.2-1.8 6.2-3.6 8.9C9.4 64.7 5.1 70.9.9 74l-.3.3-.2.3H.2v.3c-.1.3-.1.7 0 1v.3h.1l.2.3.3.3c4.2 3.1 8.5 9.3 11.3 13.7 1.8 2.7 3.1 5.7 3.6 8.9v2.2c.1 1.6.2 3.5.2 5.7v14.3c0 9.4 2.4 16.7 7.1 21.7s10.2 7.6 18 7.6h13.8c1.2 0 2.2-1 2.2-2.2V140c0-1.2-1-2.2-2.2-2.2H42.2c-4.4 0-7.5-1-9.2-3s-2.7-5.6-2.7-10.5v-22.4c.2-6.4-1.7-12.6-5.2-17.9-1.6-2.5-3.5-4.7-5.7-6.6-.9-.7-1.1-2-.4-2.9.2-.2.3-.3.4-.5zM412.5 74c-2.2-1.9-4.1-4.1-5.7-6.6-3.5-5.3-5.4-11.5-5.2-17.9V27c0-4.9-.9-8.4-2.7-10.5s-4.8-3-9.2-3h-12.6c-1.2 0-2.2-1-2.2-2.2V2.2c0-1.2 1-2.2 2.2-2.2h13.4c7.8 0 12.9 2.1 18 7.6s7.1 12.3 7.1 21.7v14.2c0 2.2.1 4 .2 5.7v2.2c.5 3.2 1.8 6.2 3.6 8.9 2.8 4.5 7.1 10.7 11.3 13.7l.3.3.2.3h.1v.3c.1.3.1.7 0 1v.3h-.1l-.2.3-.3.3c-4.2 3.1-8.5 9.3-11.3 13.7-1.8 2.7-3.1 5.7-3.6 8.9v2.2c-.1 1.6-.2 3.5-.2 5.7v14.3c0 9.4-2.4 16.7-7.1 21.7s-10.2 7.6-18 7.6h-13.4c-1.2 0-2.2-1-2.2-2.2V140c0-1.2 1-2.2 2.2-2.2h12.7c4.4 0 7.5-1 9.2-3s2.7-5.6 2.7-10.5v-22.4c-.2-6.3 1.6-12.6 5.1-17.9 1.6-2.5 3.5-4.7 5.7-6.6.9-.7 1.1-2 .4-2.9-.2-.2-.3-.3-.4-.5z"></path></svg></a> <nav class="navigation"><ul class="menu"><li class="hasSubMenu"><a href="/docs/" class="active">Docs</a><span class="caret">◥◤</span> <ul class="submenu"><li><a href="/docs/" class="link">Get Started</a></li><li><a href="/docs/concepts/" class="link">Concepts</a></li><li><a href="/docs/guides/" class="link">Guides</a></li><li><a href="/docs/reference/" class="link">Reference</a></li></ul></li><li class="hasSubMenu"><a href="/product/">Use Cases</a><span class="caret">◥◤</span> <ul class="submenu"><li><div class="non-link">Embed auth into your app</div></li><li><a href="/product/" class="link">Overview</a></li><li><a href="/product/authentication/" class="link">Authentication</a></li><li><a href="/product/authorization/" class="link">Authorization</a></li><li><a href="/product/user-management/" class="link">User Management</a></li><li><div class="divider"></div></li><li><div class="non-link">Publish an integration</div></li><li><a href="/okta-integration-network/" class="link">Overview</a></li></ul></li><li><a href="/pricing/">Pricing</a><!----> <!----></li><li><a href="/blog/">Blog</a><!----> <!----></li><li class="hasSubMenu"><a href="https://www.okta.com/contact/">Support</a><span class="caret">◥◤</span> <ul class="submenu"><li><a href="https://devforum.okta.com/" class="link">Okta Developer Forums</a></li><li><a href="mailto:developers@okta.com" class="link">developers@okta.com</a></li></ul></li></ul> <div class="buttons-block"><a href="https://login.okta.com/" class="buttons-block--button">Login</a> <a href="https://developer.okta.com/signup/" class="buttons-block--button red">Sign Up</a></div></nav> <div class="top-bar-nav--controls"><button class="search-icon"></button> <div class="top-bar-nav--controls--toggle"><svg viewBox="0 0 20 20" class="toggle"><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path></svg></div></div></nav> <div class="searchbar" style="display:none;"><div data-search-bar="" class="SearchBar"><div class="Wrap"><div data-pipeline="developer-okta-com" class="SearchBox" style="display: flex;"><div class="CoveoOmnibox"></div> <div class="CoveoSearchButton">Search</div> <div class="CoveoAnalytics"></div></div></div></div></div></div></div> <div class="page-body"><div class="breadcrumb"><div class="breadcrumb--container"><ol><li><a href="/docs/" class="router-link-active">Docs</a> <svg viewBox="0 0 256 512"><path d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"></path></svg></li><li><a href="/docs/reference/" class="router-link-active">Reference</a> <svg viewBox="0 0 256 512"><path d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"></path></svg></li> <li class="crumb-show-contents">Show Contents</li></ol></div></div> <div class="content"><div class="content--container"><div class="tree-nav"><aside class="landing-navigation"><ul class="landing"><li><div class="link-wrap"><div><div class="is-link item-collapsable"><!----> <!---->
                Reference
            </div></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api-overview/" class="tree-nav-link">API Overview</a></div></div> <!----></li><li class="subnav"><div class="link-wrap"><div><div class="is-link item-collapsable"><svg viewBox="0 0 320 512"><path d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"></path></svg> <!---->
                Sign in Your Users
            </div></div></div> <ul class="sections" style="display:none;"><li><div class="link-wrap"><div><a href="/docs/reference/api/oidc/" class="tree-nav-link">OpenID Connect &amp; OAuth 2.0 API</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/authn/" class="tree-nav-link">Authentication</a></div></div> <!----></li></ul></li><li class="subnav"><div class="link-wrap"><div><div class="is-link item-collapsable"><svg viewBox="0 0 320 512"><path d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"></path></svg> <!---->
                Manage Okta Resources
            </div></div></div> <ul class="sections" style="display:none;"><li><div class="link-wrap"><div><a href="/docs/reference/api/roles/" class="tree-nav-link">Administrator Roles</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/apps/" class="tree-nav-link">Apps</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/authorization-servers/" class="tree-nav-link">Authorization Servers</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/oauth-clients/" class="tree-nav-link">Dynamic Client Registration</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/event-hooks/" class="tree-nav-link">Event Hooks</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/event-types/" class="tree-nav-link">Event Types</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/factors/" class="tree-nav-link">Factors</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/features/" class="tree-nav-link">Features</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/groups/" class="tree-nav-link">Groups</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/idps/" class="tree-nav-link">Identity Providers</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/inline-hooks/" class="tree-nav-link">Inline Hooks</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/linked-objects/" class="tree-nav-link">Linked Objects</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/policy/" class="tree-nav-link">Policy</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/schemas/" class="tree-nav-link">Schemas</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/sessions/" class="tree-nav-link">Sessions</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/system-log/" class="tree-nav-link">System Log</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/templates/" class="tree-nav-link">Templates</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/trusted-origins/" class="tree-nav-link">Trusted Origins</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/user-types/" class="tree-nav-link">User Types</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/users/" class="tree-nav-link">Users</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/zones/" class="tree-nav-link">Zones</a></div></div> <!----></li></ul></li><li class="subnav"><div class="link-wrap"><div><div class="is-link item-collapsable"><svg viewBox="0 0 320 512"><path d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"></path></svg> <!---->
                Rate Limits
            </div></div></div> <ul class="sections" style="display:none;"><li><div class="link-wrap"><div><a href="/docs/reference/rate-limits/" class="tree-nav-link">Rate limits overview</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/rl-global-enduser/" class="tree-nav-link">Authentication/End-user rate limits</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/rl-global-mgmt/" class="tree-nav-link">Management rate limits</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/rl-global-other-endpoints/" class="tree-nav-link">Other endpoint rate limits</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/rl-additional-limits/" class="tree-nav-link">Additional limits</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/rl-best-practices/" class="tree-nav-link">Rate limit best practices</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/rl-clientbased/" class="tree-nav-link">Client-based rate limits</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/rl-dynamic-scale/" class="tree-nav-link">DynamicScale</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/rl-previous/" class="tree-nav-link">Previous rate limits</a></div></div> <!----></li></ul></li><li><div class="link-wrap"><div><a href="/docs/reference/error-codes/" class="tree-nav-link">Error Codes</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/import-hook/" class="tree-nav-link">Import Hook</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/okta-expression-language/" class="tree-nav-link">Okta Expression Language</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/password-hook/" class="tree-nav-link">Password Hook</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/postman-collections/" class="tree-nav-link">Postman Collections</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/registration-hook/" class="tree-nav-link">Registration Hook</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/releases-at-okta/" class="tree-nav-link">Release Life Cycle</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/saml-hook/" class="tree-nav-link">SAML Hook</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/scim/" class="tree-nav-link">SCIM Protocol</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/social-settings/" class="tree-nav-link">Social IdP Settings</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/token-hook/" aria-current="page" class="tree-nav-link router-link-exact-active router-link-active">Token Hook</a></div></div> <!----></li><li><div class="link-wrap"><div><a href="/docs/reference/api/webfinger/" class="tree-nav-link">WebFinger</a></div></div> <!----></li></ul></aside></div> <div class="content-area"><!----> <div class="mobile-on-this-page"><h3 class="mobile-header">On This Page</h3> <div dir="auto" class="v-select vs--single vs--unsearchable"> <div id="vs21__combobox" role="combobox" aria-expanded="false" aria-owns="vs21__listbox" aria-label="Search for option" class="vs__dropdown-toggle"><div class="vs__selected-options"><span class="vs__selected">
            See Also
           <!----></span> <input readonly="readonly" aria-autocomplete="list" aria-labelledby="vs21__combobox" aria-controls="vs21__listbox" type="search" autocomplete="off" value="" class="vs__search"></div> <div class="vs__actions"><button type="button" title="Clear Selected" aria-label="Clear Selected" class="vs__clear" style="display:none;"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="10"><path d="M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"></path></svg></button> <svg xmlns="http://www.w3.org/2000/svg" width="14" height="10" role="presentation" class="vs__open-indicator"><path d="M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"></path></svg> <div class="vs__spinner" style="display:none;">Loading...</div></div></div> <ul id="vs21__listbox" role="listbox" style="display:none;visibility:hidden;"></ul> </div></div> <div class="content__default"><h1>Token Inline Hook Reference</h1> <p>This page provides reference documentation for:</p> <ul><li><p>JSON objects that are contained in the outbound request from Okta to your external service</p></li> <li><p>JSON objects that you can include in your response</p></li></ul> <p>This information is specific to the Token Inline Hook, one type of Inline Hook supported by Okta.</p> <h2 id="see-also">See Also <a href="#see-also" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h2> <p>For a general introduction to Okta Inline Hooks, see <a href="/docs/concepts/inline-hooks/">Inline Hooks</a>.</p> <p>For information on the API for registering external service endpoints with Okta, see <a href="/docs/reference/api/inline-hooks/">Inline Hooks Management API</a>.</p> <p>For steps to enable this Inline Hook, see below, <a href="#enabling-a-token-inline-hook">Enabling a Token Inline Hook</a>.</p> <h2 id="about">About <a href="#about" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h2> <p>This type of Inline Hook is triggered when OAuth 2.0 and OpenID Connect (OIDC) tokens are minted by your Okta Custom Authorization Server. Before sending the token to the requester, Okta calls out to your external service, and your service can respond with commands to add custom claims to the token or to modify existing claims.</p> <p>This functionality can be used to add data that is sensitive, calculated at runtime, or complexly-structured and not appropriate for storing in Okta user profiles. Data added this way is never logged or stored by Okta. As an example, tokens minted for a medical app could be augmented with confidential patient data provided by your external service and not stored in Okta.</p> <p>In addition to adding custom claims, you can modify or remove an existing custom claim or an OIDC standard profile claim. You can also update how long an access token or an ID token is valid.</p> <p>This Inline Hook works only when using an <a href="/docs/guides/customize-authz-server/create-authz-server/">Okta Custom Authorization Server</a>, not the built-in Okta Authorization Server.</p> <h2 id="objects-in-the-request-from-okta">Objects in the Request from Okta <a href="#objects-in-the-request-from-okta" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h2> <p>For the Token Inline Hook, the outbound call from Okta to your external service includes the following objects in its JSON payload:</p> <h3 id="data-identity">data.identity <a href="#data-identity" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h3> <p>Provides information on the properties of the ID token that Okta has generated, including the existing claims that it contains.</p> <table><thead><tr><th>Property</th> <th>Description</th> <th>Data Type</th></tr></thead> <tbody><tr><td>claims</td> <td>Claims included in the token.</td> <td><a href="#claims">claims</a> object</td></tr> <tr><td>lifetime</td> <td>Lifetime of the token.</td> <td><a href="#lifetime">lifetime</a> object</td></tr></tbody></table> <h3 id="data-access">data.access <a href="#data-access" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h3> <p>Provides information on the properties of the access token that Okta has generated, including the existing claims that it contains.</p> <table><thead><tr><th>Property</th> <th>Description</th> <th>Data Type</th></tr></thead> <tbody><tr><td>claims</td> <td>Claims included in the token.</td> <td><a href="#claims">claims</a> object</td></tr> <tr><td>lifetime</td> <td>Lifetime of the token.</td> <td><a href="#lifetime">lifetime</a> object</td></tr> <tr><td>scopes</td> <td>The scopes contained in the token.</td> <td><a href="#scopes">scopes</a> object</td></tr></tbody></table> <h4 id="claims">claims <a href="#claims" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h4> <p>Consists of name-value pairs for each included claim. For descriptions of the claims that can be included, see Okta's <a href="/docs/reference/api/oidc/#tokens-and-claims">OpenID Connect and OAuth 2.0 API reference</a>.</p> <h4 id="lifetime">lifetime <a href="#lifetime" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h4> <table><thead><tr><th>Property</th> <th>Description</th> <th>Data Type</th></tr></thead> <tbody><tr><td>expiration</td> <td>Time in seconds until the token expires.</td> <td>Number</td></tr></tbody></table> <h4 id="scopes">scopes <a href="#scopes" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h4> <p>The set of scopes that have been granted. For descriptions of the scopes that can be included, see Okta's <a href="/docs/reference/api/oidc/#tokens-and-claims">OpenID Connect and OAuth 2.0 API reference</a>.</p> <h2 id="objects-in-the-response-that-you-send">Objects in the Response that You Send <a href="#objects-in-the-response-that-you-send" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h2> <p>For the Token Inline Hook, the <code>commands</code> and <code>error</code> objects that you can return in the JSON payload of your response are defined as follows:</p> <h3 id="commands">commands <a href="#commands" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h3> <p>The <code>commands</code> object is where you can provide commands to Okta. It is where you can tell Okta to add additional claims to the token.</p> <p>The <code>commands</code> object is an array, allowing you to send multiple commands. In each array element, there needs to be a <code>type</code> property and <code>value</code> property. The <code>type</code> property is where you specify which of the supported commands you want to execute, and <code>value</code> is where you supply an operand for that command.</p> <p>In the case of the Token hook type, the <code>value</code> property is itself a nested object in which you specify a particular operation, a path to act on, and a value.</p> <table><thead><tr><th>Property</th> <th>Description</th> <th>Data Type</th></tr></thead> <tbody><tr><td>type</td> <td>One of the <a href="#supported-commands">supported commands</a>.</td> <td>String</td></tr> <tr><td>value</td> <td>Operand to pass to the command. It specifies a particular op to perform.</td> <td><a href="#value">value</a></td></tr></tbody></table> <h4 id="supported-commands">Supported Commands <a href="#supported-commands" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h4> <p>The following commands are supported for the Token Inline Hook type:</p> <table><thead><tr><th>Command</th> <th>Description</th></tr></thead> <tbody><tr><td>com.okta.identity.patch</td> <td>Modify an ID token.</td></tr> <tr><td>com.okta.access.patch</td> <td>Modify an access token.</td></tr></tbody></table> <blockquote><p><strong>Note:</strong> The <code>commands</code> array should only contain commands that can be applied to the requested tokens. For example, if only an ID token is requested, the <code>commands</code> array shouldn't contain commands of the type <code>com.okta.access.patch</code>.</p></blockquote> <h4 id="value">value <a href="#value" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h4> <p>The <code>value</code> object is where you specify the specific operation to perform. It is an array, allowing you to request more than one operation.</p> <table><thead><tr><th>Property</th> <th>Description</th> <th>Data Type</th></tr></thead> <tbody><tr><td>op</td> <td>The name of one of the <a href="#list-of-supported-ops">supported ops</a>.</td> <td>String</td></tr> <tr><td>path</td> <td>Location within the token to apply the operation, specified as a slash-delimited path. When adding, replacing, or removing a claim, this always begins with <code>/claims/</code>  and is followed by the name of the new claim that you are adding. When replacing a token lifetime, the path should always be <code>/token/lifetime/expiration</code>.</td> <td>String</td></tr> <tr><td>value</td> <td>Value to set the claim to.</td> <td>Any JSON object</td></tr></tbody></table> <h4 id="list-of-supported-ops">List of Supported Ops <a href="#list-of-supported-ops" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h4> <table><thead><tr><th>Op</th> <th>Description</th></tr></thead> <tbody><tr><td>add</td> <td>Add a claim.</td></tr> <tr><td>replace</td> <td>Modify an existing claim and update the token lifetime.</td></tr> <tr><td>remove</td> <td>Remove an existing claim.</td></tr></tbody></table> <h4 id="reserved-claims-for-token-hooks">Reserved claims for Token Hooks <a href="#reserved-claims-for-token-hooks" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h4> <p>Okta defines a number of reserved claims that can't be overridden. When you add a custom claim to a <a href="/docs/reference/api/oidc/#tokens-and-claims">token</a> or modify a claim, avoid using the following reserved claims:</p> <table><thead><tr><th>Claim Name</th> <th>Token Type</th></tr></thead> <tbody><tr><td>acr</td> <td>Access Token</td></tr> <tr><td>amr</td> <td>Access Token</td></tr> <tr><td>as_uri</td> <td>Access Token</td></tr> <tr><td>cid</td> <td>Access Token</td></tr> <tr><td>groups</td> <td>Access Token</td></tr> <tr><td>rpt</td> <td>Access Token</td></tr> <tr><td>rsi</td> <td>Access Token</td></tr> <tr><td>uid</td> <td>Access Token</td></tr> <tr><td>username</td> <td>Access Token</td></tr> <tr><td>active</td> <td>ID Token</td></tr> <tr><td>aid</td> <td>ID Token</td></tr> <tr><td>app_id</td> <td>ID Token</td></tr> <tr><td>app_type</td> <td>ID Token</td></tr> <tr><td>at_hash</td> <td>ID Token</td></tr> <tr><td>auth_time</td> <td>ID Token</td></tr> <tr><td>client_id</td> <td>ID Token</td></tr> <tr><td>client_ip</td> <td>ID Token</td></tr> <tr><td>client_req_id</td> <td>ID Token</td></tr> <tr><td>client_type</td> <td>ID Token</td></tr> <tr><td>client_user_agent</td> <td>ID Token</td></tr> <tr><td>cnf</td> <td>ID Token</td></tr> <tr><td>c_hash</td> <td>ID Token</td></tr> <tr><td>device_compliance</td> <td>ID Token</td></tr> <tr><td>device_id</td> <td>ID Token</td></tr> <tr><td>device_known</td> <td>ID Token</td></tr> <tr><td>device_managed</td> <td>ID Token</td></tr> <tr><td>device_name</td> <td>ID Token</td></tr> <tr><td>device_trust</td> <td>ID Token</td></tr> <tr><td>did</td> <td>ID Token</td></tr> <tr><td>dst</td> <td>ID Token</td></tr> <tr><td>group</td> <td>ID Token</td></tr> <tr><td>groups</td> <td>ID Token</td></tr> <tr><td>hotk</td> <td>ID Token</td></tr> <tr><td>idp</td> <td>ID Token</td></tr> <tr><td>idp_iss</td> <td>ID Token</td></tr> <tr><td>mac_key</td> <td>ID Token</td></tr> <tr><td>may_act</td> <td>ID Token</td></tr> <tr><td>nonce</td> <td>ID Token</td></tr> <tr><td>oid</td> <td>ID Token</td></tr> <tr><td>okta_emailVerified</td> <td>ID Token</td></tr> <tr><td>okta_lastUpdated</td> <td>ID Token</td></tr> <tr><td>orig</td> <td>ID Token</td></tr> <tr><td>permissions</td> <td>ID Token</td></tr> <tr><td>purpose</td> <td>ID Token</td></tr> <tr><td>pwd_exp_days</td> <td>ID Token</td></tr> <tr><td>pwd_exp_time</td> <td>ID Token</td></tr> <tr><td>rid</td> <td>ID Token</td></tr> <tr><td>role</td> <td>ID Token</td></tr> <tr><td>scope</td> <td>ID Token</td></tr> <tr><td>scopes</td> <td>ID Token</td></tr> <tr><td>sid</td> <td>ID Token</td></tr> <tr><td>term</td> <td>ID Token</td></tr> <tr><td>user_ip</td> <td>ID Token</td></tr> <tr><td>iss</td> <td>Access Token &amp; ID Token</td></tr> <tr><td>jti</td> <td>Access Token &amp; ID Token</td></tr> <tr><td>token_type</td> <td>Access Token &amp; ID Token</td></tr> <tr><td>ver</td> <td>Access Token &amp; ID Token</td></tr></tbody></table> <h3 id="error">error <a href="#error" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h3> <p>When you return an error object, it should have the following structure:</p> <table><thead><tr><th>Property</th> <th>Description</th> <th>Data Type</th></tr></thead> <tbody><tr><td>errorSummary</td> <td>Human-readable summary of the error.</td> <td>String</td></tr></tbody></table> <p>Returning an error object causes Okta to return an OAuth 2.0 error to the requester of the token, with the value of <code>error</code> set to <code>server_error</code>, and the value of <code>error_description</code> set to the string that you supplied in the <code>errorSummary</code> property of the <code>error</code> object that you returned.</p> <blockquote><p><strong>Note:</strong> If the error object doesn't include the <code>errorSummary</code> property defined, the following common default message is returned to the end user: <code>The callback service returned an error</code></p></blockquote> <h2 id="sample-json-payload-of-a-request">Sample JSON Payload of a Request <a href="#sample-json-payload-of-a-request" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h2> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;source&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://${yourOktaDomain}/oauth2/default/v1/authorize&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;eventId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3OWo4oo-QQ-rBWfRyTmQYw&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;eventTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-01-15T23:20:47.000Z&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;eventTypeVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;cloudEventVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;contentType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;eventType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;com.okta.oauth2.tokens.transform&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;context&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;reqv66CbCaCStGEFc8AdfS0ng&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://${yourOktaDomain}/oauth2/default/v1/authorize?scope=openid+profile+email&amp;response_type=token+id_token&amp;redirect_uri=https%3A%2F%2Fhttpbin.org%2Fget&amp;state=foobareere&amp;nonce=asf&amp;client_id=customClientIdNative&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ipAddress&quot;</span><span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;protocol&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OAUTH2.0&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;scope&quot;</span><span class="token operator">:</span> <span class="token string">&quot;openid profile email&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foobareere&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;redirect_uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://httpbin.org/get&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;response_mode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fragment&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;response_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;token id_token&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;client_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;customClientIdNative&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;issuer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://${yourOktaDomain}/oauth2/default&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;client&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;customClientIdNative&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Native client&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;PUBLIC&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;session&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;102Qoe7t5PcRnSxr8j3I8I6pA&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;userId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;00uq8tMo3zV0OfJON0g3&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;login&quot;</span><span class="token operator">:</span> <span class="token string">&quot;administrator1@clouditude.net&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;createdAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-01-15T23:17:09.000Z&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;expiresAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-01-16T01:20:46.000Z&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ACTIVE&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;lastPasswordVerification&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-01-15T23:17:09.000Z&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;amr&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">&quot;PASSWORD&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;idp&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;00oq6kcVwvrDY2YsS0g3&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OKTA&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;mfaActive&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;user&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;00uq8tMo3zV0OfJON0g3&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;passwordChanged&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-09-11T23:19:12.000Z&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;profile&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;login&quot;</span><span class="token operator">:</span> <span class="token string">&quot;administrator1@clouditude.net&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;firstName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Add-Min&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;lastName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;O'Cloudy Tud&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;locale&quot;</span><span class="token operator">:</span> <span class="token string">&quot;en&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;timeZone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;America/Los_Angeles&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_links&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;groups&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://${yourOktaDomain}/00uq8tMo3zV0OfJON0g3/groups&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;factors&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://${yourOktaDomain}/api/v1/users/00uq8tMo3zV0OfJON0g3/factors&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;policy&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;00pq8lGaLlI8APuqY0g3&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;rule&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0prq8mLKuKAmavOvq0g3&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;identity&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;claims&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;sub&quot;</span><span class="token operator">:</span> <span class="token string">&quot;00uq8tMo3zV0OfJON0g3&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Add-Min O'Cloudy Tud&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webmaster@clouditude.net&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ver&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;iss&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://${yourOktaDomain}/oauth2/default&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;aud&quot;</span><span class="token operator">:</span> <span class="token string">&quot;customClientIdNative&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;jti&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ID.YxF2whJfB3Eu4ktG_7aClqtCgjDq6ab_hgpiV7-ZZn0&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;amr&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">&quot;pwd&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;idp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;00oq6kcVwvrDY2YsS0g3&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token string">&quot;asf&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;preferred_username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;administrator1@clouditude.net&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;auth_time&quot;</span><span class="token operator">:</span> <span class="token number">1547594229</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;token&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;lifetime&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;expiration&quot;</span><span class="token operator">:</span> <span class="token number">3600</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;access&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;claims&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;ver&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;jti&quot;</span><span class="token operator">:</span> <span class="token string">&quot;AT.W-rrB-z-kkZQmHW0e6VS3Or--QfEN_YvoWJa46A7HAA&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;iss&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://${yourOktaDomain}/oauth2/default&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;aud&quot;</span><span class="token operator">:</span> <span class="token string">&quot;api://default&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;cid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;customClientIdNative&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;uid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;00uq8tMo3zV0OfJON0g3&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;sub&quot;</span><span class="token operator">:</span> <span class="token string">&quot;administrator1@clouditude.net&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;firstName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Add-Min&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;preferred_username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;administrator1@clouditude.net&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;token&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;lifetime&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;expiration&quot;</span><span class="token operator">:</span> <span class="token number">3600</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;scopes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;openid&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;scpq7bW1cp6dcvrz80g3&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;action&quot;</span><span class="token operator">:</span> <span class="token string">&quot;GRANT&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;profile&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;scpq7cWJ81CIP5Qkr0g3&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;action&quot;</span><span class="token operator">:</span> <span class="token string">&quot;GRANT&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;scpq7dxsoz6LQlRj00g3&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;action&quot;</span><span class="token operator">:</span> <span class="token string">&quot;GRANT&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="sample-json-payloads-of-responses">Sample JSON Payloads of Responses <a href="#sample-json-payloads-of-responses" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h2> <p>This section provides example JSON payloads for the supported operations.</p> <h3 id="sample-response-to-add-a-claim">Sample Response to Add a Claim <a href="#sample-response-to-add-a-claim" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h3> <p>Use the <code>add</code> operation to add new claims to a token. If you use the <code>add</code> operation and include an existing claim in your response with a different value, that value is replaced. Use the <code>replace</code> operation instead. See <a href="/docs/reference/token-hook/#sample-response-to-replace-an-existing-claim">Sample Response to Replace an Existing Claim</a> for more information. Attempting to remove a system-specific claim or using an invalid operation results in the entire PATCH failing and errors logged in the token hooks events.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;com.okta.identity.patch&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;op&quot;</span><span class="token operator">:</span> <span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/claims/extPatientId&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1234&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;com.okta.access.patch&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;op&quot;</span><span class="token operator">:</span> <span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/claims/external_guid&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;F0384685-F87D-474B-848D-2058AC5655A7&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You can also use the <code>add</code> operation to add new members to existing JSON objects and new elements to existing arrays. For example, you have a JSON object in a claim called <code>employee_profile</code>, and you want to add the <code>department_id</code> member to the claim.</p> <p>The existing target JSON object:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>  
   <span class="token property">&quot;employee_profile&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>  
      <span class="token property">&quot;employee_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1234&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Anna&quot;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Add <code>department_id</code> by specifying the claim in the path, followed by the name of the object member.</p> <blockquote><p><strong>Note:</strong> Attempting to add a member within a JSON object that doesn't exist or using an invalid operation results in the entire PATCH failing and errors logged in the token hooks events.</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>  
   <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
      <span class="token punctuation">{</span>  
         <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;com.okta.identity.patch&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
            <span class="token punctuation">{</span>  
               <span class="token property">&quot;op&quot;</span><span class="token operator">:</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span>
               <span class="token property">&quot;path&quot;</span><span class="token operator">:</span><span class="token string">&quot;/claims/employee_profile/department_id&quot;</span><span class="token punctuation">,</span>
               <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;4947&quot;</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>   
</code></pre></div><p>The resulting JSON object:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>  
   <span class="token property">&quot;employee_profile&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>  
      <span class="token property">&quot;employee_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1234&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Anna&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;department_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;4947&quot;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>You can also append an element to an array by specifying the name of the array, followed by the index where you want to insert the element in the path. For example, you have an array that contains the user's preferred airports, and you want to add a new airport to the array.</p> <p>The existing target JSON object:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>  
   <span class="token property">&quot;preferred_airports&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
      <span class="token string">&quot;sjc&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;sfo&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;oak&quot;</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>  
   <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
      <span class="token punctuation">{</span>  
         <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;com.okta.identity.patch&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
            <span class="token punctuation">{</span>  
               <span class="token property">&quot;op&quot;</span><span class="token operator">:</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span>
               <span class="token property">&quot;path&quot;</span><span class="token operator">:</span><span class="token string">&quot;/claims/preferred_airports/3&quot;</span><span class="token punctuation">,</span>
               <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;lax&quot;</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The resulting JSON object:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>  
   <span class="token property">&quot;preferred_airports&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
      <span class="token string">&quot;sjc&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;sfo&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;oak&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;lax&quot;</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This <code>add</code> operation adds <code>lax</code> to the end of the array. Alternatively, you can just specify the array name followed by a hyphen <code>-</code> in the path to append an element at the end of the array.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>  
   <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
      <span class="token punctuation">{</span>  
         <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;com.okta.identity.patch&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
            <span class="token punctuation">{</span>  
               <span class="token property">&quot;op&quot;</span><span class="token operator">:</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span>
               <span class="token property">&quot;path&quot;</span><span class="token operator">:</span><span class="token string">&quot;/claims/preferred_airports/-&quot;</span><span class="token punctuation">,</span>
               <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;lax&quot;</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><strong>Note:</strong> Attempting to add an element within an array that doesn't exist or specifying an invalid index results in the entire PATCH failing and errors logged in the token hooks events.</p></blockquote> <h3 id="sample-response-to-replace-an-existing-claim">Sample Response to Replace an Existing Claim <a href="#sample-response-to-replace-an-existing-claim" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h3> <p>You can modify existing custom claims or OIDC standard profile claims, such as <code>birthdate</code> and <code>locale</code>. You can't, however, modify any system-specific claims, such as <code>iss</code> or <code>ver</code>, and you can't modify a claim that isn't currently part of the token in the request payload. Attempting to modify a system-specific claim or using an invalid operation results in the entire PATCH failing and errors logged in the token hooks events.</p> <p>For the list of access token reserved claims that you can't modify, see <a href="/docs/reference/api/oidc/#access-token-scopes-and-claims">Access Tokens Scopes and Claims</a>. Note that although the <code>aud</code> and <code>sub</code> claims are listed as reserved claims, you can modify those claims in access tokens. You can't modify these claims in ID tokens.</p> <p>See <a href="/docs/reference/api/oidc/#id-token-claims">ID Token Claims</a> for a list of ID token reserved claims that you can't modify.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> 
        <span class="token punctuation">{</span> 
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;com.okta.identity.patch&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> 
                 <span class="token punctuation">{</span> 
                     <span class="token property">&quot;op&quot;</span><span class="token operator">:</span> <span class="token string">&quot;replace&quot;</span><span class="token punctuation">,</span>
                     <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/claims/extPatientId&quot;</span><span class="token punctuation">,</span>
                     <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1234&quot;</span>
                  <span class="token punctuation">}</span>
             <span class="token punctuation">]</span> 
         <span class="token punctuation">}</span><span class="token punctuation">,</span> 
         <span class="token punctuation">{</span> 
             <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;com.okta.access.patch&quot;</span><span class="token punctuation">,</span>
             <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                  <span class="token punctuation">{</span> 
                     <span class="token property">&quot;op&quot;</span><span class="token operator">:</span> <span class="token string">&quot;replace&quot;</span><span class="token punctuation">,</span>
                     <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/claims/external_guid&quot;</span><span class="token punctuation">,</span>
                     <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;F0384685-F87D-474B-848D-2058AC5655A7&quot;</span> 
                   <span class="token punctuation">}</span>
              <span class="token punctuation">]</span> 
          <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You can also use the <code>replace</code> operation to modify members within JSON objects and elements within arrays. For example, you have a JSON object in a claim called <code>employee_profile</code>, and you want to update the email address of the employee.</p> <p>The existing target JSON object:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>  
   <span class="token property">&quot;employee_profile&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>  
      <span class="token property">&quot;employee_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1234&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Anna&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;email&quot;</span><span class="token operator">:</span><span class="token string">&quot;anna.v@company.com&quot;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Specify the claim in the path, followed by the name of the object member that you want to modify.</p> <blockquote><p><strong>Note:</strong> Attempting to modify a member within a JSON object that doesn't exist or using an invalid operation results in the entire PATCH failing and errors logged in the token hooks events.</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>  
   <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
      <span class="token punctuation">{</span>  
         <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;com.okta.identity.patch&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
            <span class="token punctuation">{</span>  
               <span class="token property">&quot;op&quot;</span><span class="token operator">:</span><span class="token string">&quot;replace&quot;</span><span class="token punctuation">,</span>
               <span class="token property">&quot;path&quot;</span><span class="token operator">:</span><span class="token string">&quot;/claims/employee_profile/email&quot;</span><span class="token punctuation">,</span>
               <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;anna@company.com&quot;</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The resulting JSON object:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>  
   <span class="token property">&quot;employee_profile&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>  
      <span class="token property">&quot;employee_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1234&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Anna&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;email&quot;</span><span class="token operator">:</span><span class="token string">&quot;anna@company.com&quot;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Similarly, you can replace elements in an array by specifying the array name and the valid index of the element that you want to replace in the path.</p> <h3 id="sample-response-to-modify-token-lifetime">Sample Response to Modify Token Lifetime <a href="#sample-response-to-modify-token-lifetime" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h3> <p>You can modify how long the access and ID tokens are valid by specifying the <code>lifetime</code> in seconds. The <code>lifetime</code> value must be a minimum of five minutes (300 seconds) and a maximum of 24 hours (86,400 seconds).</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span> 
     <span class="token punctuation">[</span> 
        <span class="token punctuation">{</span> 
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;com.okta.identity.patch&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> 
                 <span class="token punctuation">{</span> 
                     <span class="token property">&quot;op&quot;</span><span class="token operator">:</span> <span class="token string">&quot;replace&quot;</span><span class="token punctuation">,</span>
                     <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/token/lifetime/expiration&quot;</span><span class="token punctuation">,</span>
                     <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">36000</span>
                  <span class="token punctuation">}</span>
             <span class="token punctuation">]</span> 
         <span class="token punctuation">}</span><span class="token punctuation">,</span> 
         <span class="token punctuation">{</span> 
             <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;com.okta.access.patch&quot;</span><span class="token punctuation">,</span>
             <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                  <span class="token punctuation">{</span> 
                     <span class="token property">&quot;op&quot;</span><span class="token operator">:</span> <span class="token string">&quot;replace&quot;</span><span class="token punctuation">,</span>
                     <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/token/lifetime/expiration&quot;</span><span class="token punctuation">,</span>
                     <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">36000</span> 
                   <span class="token punctuation">}</span>
              <span class="token punctuation">]</span> 
          <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="sample-response-to-remove-token-claims">Sample Response to Remove Token Claims <a href="#sample-response-to-remove-token-claims" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h3> <p>You can remove existing custom claims or OIDC standard profile claims, such as <code>birthdate</code> or <code>locale</code>. You can't, however, remove any system-specific claims, such as <code>iss</code> or <code>ver</code>, and you can't remove a claim that isn't currently part of the token in the request payload. Attempting to remove a system-specific claim or using an invalid operation results in the entire PATCH failing and errors logged in the token hooks events.</p> <p>For the list of access token reserved claims that you can't remove, see <a href="/docs/reference/api/oidc/#access-token-scopes-and-claims">Access Tokens Scopes and Claims</a>.</p> <p>See <a href="/docs/reference/api/oidc/#id-token-claims">ID Token Claims</a> for a list of ID token reserved claims that you can't remove.</p> <blockquote><p><strong>Note:</strong> The <code>value</code> property for the <code>remove</code> operation isn't required. If you provide it in the response, it should be set to <code>null</code>. Providing any other value fails the entire PATCH response.</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span> 
     <span class="token punctuation">[</span> 
        <span class="token punctuation">{</span> 
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;com.okta.identity.patch&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> 
                 <span class="token punctuation">{</span> 
                     <span class="token property">&quot;op&quot;</span><span class="token operator">:</span> <span class="token string">&quot;remove&quot;</span><span class="token punctuation">,</span>
                     <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/claims/birthdate&quot;</span><span class="token punctuation">,</span>
                     <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
                  <span class="token punctuation">}</span>
             <span class="token punctuation">]</span> 
         <span class="token punctuation">}</span><span class="token punctuation">,</span> 
         <span class="token punctuation">{</span> 
             <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;com.okta.access.patch&quot;</span><span class="token punctuation">,</span>
             <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                  <span class="token punctuation">{</span> 
                     <span class="token property">&quot;op&quot;</span><span class="token operator">:</span> <span class="token string">&quot;remove&quot;</span><span class="token punctuation">,</span>
                     <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/claims/external_guid&quot;</span>
                   <span class="token punctuation">}</span>
              <span class="token punctuation">]</span> 
          <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You can also use the <code>remove</code> operation to remove members from existing JSON objects and elements from existing arrays. For example, you have an array that contains the user's preferred airports, and you want to remove an airport from the array.</p> <p>Existing target JSON object:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>  
   <span class="token property">&quot;preferred_airports&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
      <span class="token string">&quot;sjc&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;lax&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;sfo&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;oak&quot;</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You can remove the element from the array by specifying the array name followed by the index of the element that you want to remove. You don't need to specify a value for the <code>remove</code> operation. But, you can specify <code>null</code> as the value if you want.</p> <blockquote><p><strong>Note:</strong> Attempting to remove an element within an array that doesn't exist or specifying an invalid value results in the entire PATCH failing and errors logged in the token hooks events.</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>  
   <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
      <span class="token punctuation">{</span>  
         <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;com.okta.identity.patch&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
            <span class="token punctuation">{</span>  
               <span class="token property">&quot;op&quot;</span><span class="token operator">:</span><span class="token string">&quot;remove&quot;</span><span class="token punctuation">,</span>
               <span class="token property">&quot;path&quot;</span><span class="token operator">:</span><span class="token string">&quot;/claims/preferred_airports/1&quot;</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span> 
</code></pre></div><p>The resulting JSON object</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>  
   <span class="token property">&quot;preferred_airports&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
      <span class="token string">&quot;sjc&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;sfo&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;oak&quot;</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Similarly, you can remove a JSON object member by specifying the JSON object in the path, followed by the claim member that you would like to remove. For example, you have an <code>employee_profile</code> claim, and you want to remove <code>email</code> from it.</p> <blockquote><p><strong>Note:</strong> Attempting to remove a member within a JSON object that doesn't exist or using an invalid operation results in the entire PATCH failing and errors logged in the token hooks events.</p></blockquote> <p>The existing target JSON object:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>  
   <span class="token property">&quot;employee_profile&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>  
      <span class="token property">&quot;employee_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1234&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Anna&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;email&quot;</span><span class="token operator">:</span><span class="token string">&quot;anna.v@company.com&quot;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>PATCH command that removes the employee's email:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>  
   <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
      <span class="token punctuation">{</span>  
         <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;com.okta.identity.patch&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
            <span class="token punctuation">{</span>  
               <span class="token property">&quot;op&quot;</span><span class="token operator">:</span><span class="token string">&quot;remove&quot;</span><span class="token punctuation">,</span>
               <span class="token property">&quot;path&quot;</span><span class="token operator">:</span><span class="token string">&quot;/claims/employee_profile/email&quot;</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The resulting JSON object:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>  
   <span class="token property">&quot;employee_profile&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>  
      <span class="token property">&quot;employee_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1234&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Anna&quot;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="enabling-a-token-inline-hook">Enabling a Token Inline Hook <a href="#enabling-a-token-inline-hook" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h2> <p>To activate the Inline Hook, you first need to register your external service endpoint with Okta using the <a href="/docs/reference/api/inline-hooks/">Inline Hooks Management API</a>.</p> <p>You then need to associate the registered Inline Hook with a Custom Authorization Server Policy Rule by completing the following steps:</p> <ol><li><p>Go to <strong>API &gt; Authorization Servers</strong>.</p></li> <li><p>Select a Custom Authorization Server from the list.</p></li> <li><p>Select <strong>Access Policies</strong> and select a policy to use with the hook. In most cases, just pick the Default Policy.</p></li> <li><p>One of the policy's rules needs to trigger the Inline Hook. Click the pencil icon for a rule to edit it. If you only have one rule, edit the Default Policy Rule.</p></li> <li><p>Click the <strong>Use this Inline Hook</strong> dropdown menu. Any Inline Hooks you have registered are listed. Select the hook you would like to use.</p></li> <li><p>Click <strong>Update Rule</strong>.</p></li></ol> <blockquote><p><strong>Note:</strong> Only one Inline Hook can be associated with each rule.</p></blockquote> <h2 id="troubleshooting">Troubleshooting <a href="#troubleshooting" class="header-anchor header-link"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a></h2> <p>This section covers what happens when a token inline hook flow fails either due to the external inline hook service returning an error object or not returning a successful response, or the inline hook patch fails.</p> <blockquote><p><strong>Note:</strong> Administrators can use the <a href="/docs/reference/api/system-log/">Okta System Log</a> to view errors. See the <a href="/docs/concepts/inline-hooks/#troubleshooting">Troubleshooting</a> section in the Inline Hooks concept piece for more information on the events related to Inline Hooks that the Okta System Log captures.</p></blockquote> <ul><li><p>When there is a communication failure with the external service, the inline hook operation is skipped. The token is generated without any modification from the inline hook.</p> <p><strong>Who can see this error?</strong> Administrators</p></li> <li><p>When the external service returns a response with any other HTTP status code besides <code>200</code>, the inline hook operation is skipped. The token is generated without any modification from the inline hook.</p> <p><strong>Who can see this error?</strong> Administrators</p></li> <li><p>When the external service returns an error object in the response, the entire token inline hook flow fails with no token generated.</p> <p><strong>Who can see this error?</strong> Administrators, developers, and end users. When the OAuth 2.0 client receives the error, the client developer can see that error if the client has the debug information. What the end user sees depends on how errors are handled within the client.</p> <blockquote><p><strong>Note:</strong> See the <a href="/docs/reference/token-hook/#error">error</a> section on this page for more information on what to include in the error object of your response and what the OAuth 2.0 error includes that Okta returns to the requestor of the token.</p></blockquote></li> <li><p>When a hook command (for example, updating, adding, and deleting claims) can't be performed, the inline hook operation is skipped. The token is generated without any modification from the inline hook.</p> <p><strong>Who can see this error?</strong> Administrators</p> <p>The following actions result in an error:</p> <ul><li><p>Using an invalid command. For example, if only an ID token is requested, the <code>commands</code> array shouldn't contain commands of the type <code>com.okta.access.patch</code>.</p></li> <li><p>Using an invalid operation</p></li> <li><p>Attempting to remove a system-specific claim</p></li> <li><p>Attempting to update a claim that doesn't exist</p></li> <li><p>Attempting to update an element within an array that doesn't exist or specifying an invalid index</p></li> <li><p>Attempting to remove a claim that doesn't exist</p></li></ul></li></ul></div></div> <div class="on-this-page"><aside class="on-this-page-navigation"><div style="display:;"><div class="title">On This Page</div> <div><ul class="links"><li><a href="/docs/reference/token-hook/#see-also" class="on-this-page-link"><span>See Also</span></a> <!----></li><li><a href="/docs/reference/token-hook/#about" class="on-this-page-link"><span>About</span></a> <!----></li><li><a href="/docs/reference/token-hook/#objects-in-the-request-from-okta" class="on-this-page-link"><span>Objects in the Request from Okta</span></a> <!----></li><li><a href="/docs/reference/token-hook/#objects-in-the-response-that-you-send" class="on-this-page-link"><span>Objects in the Response that You Send</span></a> <!----></li><li><a href="/docs/reference/token-hook/#sample-json-payload-of-a-request" class="on-this-page-link"><span>Sample JSON Payload of a Request</span></a> <!----></li><li><a href="/docs/reference/token-hook/#sample-json-payloads-of-responses" class="on-this-page-link"><span>Sample JSON Payloads of Responses</span></a> <!----></li><li><a href="/docs/reference/token-hook/#enabling-a-token-inline-hook" class="on-this-page-link"><span>Enabling a Token Inline Hook</span></a> <!----></li><li><a href="/docs/reference/token-hook/#troubleshooting" class="on-this-page-link"><span>Troubleshooting</span></a> <!----></li></ul></div></div></aside></div></div></div></div> <div class="wrap"><footer><div class="footer--logo"><a href="https://www.okta.com/" rel="noopener noreferrer"><svg viewBox="0 0 431.9 151.4"><path d="M102.2 41.4c-21 0-38.1 17.1-38.1 38.1s17.1 38.1 38.1 38.1 38.1-17.1 38.1-38.1-17.1-38.1-38.1-38.1zm0 57.1c-10.5 0-19-8.5-19-19s8.5-19 19-19 19 8.5 19 19c.1 10.5-8.4 19-18.9 19.1 0 0-.1 0-.1-.1zM169.1 92.3c0-1.9 1.5-3.4 3.4-3.4.9 0 1.8.4 2.4 1 9.5 9.7 25.3 26.3 25.4 26.4.4.5.8.8 1.4.9l1.6.2h17.2c1.8 0 3.3-1.4 3.4-3.2 0-.8-.3-1.5-.8-2.2l-28.6-29.2-1.5-1.5c-3.2-3.9-2.9-5.4.8-9.3l22.6-25.1c1.1-1.4.8-3.5-.6-4.6-.6-.4-1.3-.7-2-.7h-17c-.6.2-1.1.5-1.5.9L175 64.4c-1.3 1.4-3.4 1.5-4.8.2-.7-.6-1.1-1.5-1.1-2.5V18.9c0-1.7-1.3-3-3-3h-13c-2.2 0-3.3 1.5-3.3 2.8v95.8c0 2.2 1.8 2.8 3.3 2.8h12.7c1.7.1 3.2-1.2 3.3-2.9V92.3zM273 114l-1.4-12.8c-.2-1.7-1.7-2.9-3.4-2.7h-.1l-2.9.2c-10.1 0-18.5-7.9-19-18V64.2c-.1-2 1.5-3.6 3.5-3.7h17c1.7-.1 3.1-1.5 3-3.2V45.2c0-2.3-1.5-3.6-2.8-3.6h-17.1c-1.9.1-3.5-1.5-3.6-3.4V18.9c-.1-1.7-1.5-3.1-3.2-3H230.2c-1.6-.1-3 1.1-3.1 2.7v62.2c.5 21 17.9 37.6 38.9 37 1.4 0 2.9-.2 4.3-.3 1.7-.3 2.9-1.8 2.7-3.5zM364.7 98c-10.8 0-12.4-3.8-12.4-18.3V44.8c0-1.8-1.4-3.2-3.2-3.2h-12.9c-1.8 0-3.2 1.4-3.3 3.2v1.6C314.6 36 291.3 42.5 281 60.8c-10.4 18.3-3.9 41.6 14.4 51.9 14 7.9 31.4 6.2 43.5-4.2 3.6 5.5 9.3 9.1 18.3 9.1 1.5 0 9.7.3 9.7-3.5v-13.6c.1-1.3-.9-2.4-2.2-2.5zm-50.5.6c-10.5 0-19-8.5-19-19s8.5-19 19-19 19 8.5 19 19-8.5 19-19 19zM19.4 74c2.2-1.9 4.1-4.1 5.7-6.6 3.5-5.3 5.4-11.5 5.2-17.9V27c0-4.9.9-8.4 2.7-10.5 1.8-2.1 4.8-3 9.2-3h12.6c1.2 0 2.1-.9 2.2-2.1V2.2C57 1 56 0 54.8 0H41.5c-7.8 0-12.9 2.1-18 7.6s-7.1 12.3-7.1 21.7v14.2c0 2.2-.1 4-.2 5.7v2.2c-.5 3.2-1.8 6.2-3.6 8.9C9.4 64.7 5.1 70.9.9 74l-.3.3-.2.3H.2v.3c-.1.3-.1.7 0 1v.3h.1l.2.3.3.3c4.2 3.1 8.5 9.3 11.3 13.7 1.8 2.7 3.1 5.7 3.6 8.9v2.2c.1 1.6.2 3.5.2 5.7v14.3c0 9.4 2.4 16.7 7.1 21.7s10.2 7.6 18 7.6h13.8c1.2 0 2.2-1 2.2-2.2V140c0-1.2-1-2.2-2.2-2.2H42.2c-4.4 0-7.5-1-9.2-3s-2.7-5.6-2.7-10.5v-22.4c.2-6.4-1.7-12.6-5.2-17.9-1.6-2.5-3.5-4.7-5.7-6.6-.9-.7-1.1-2-.4-2.9.2-.2.3-.3.4-.5zM412.5 74c-2.2-1.9-4.1-4.1-5.7-6.6-3.5-5.3-5.4-11.5-5.2-17.9V27c0-4.9-.9-8.4-2.7-10.5s-4.8-3-9.2-3h-12.6c-1.2 0-2.2-1-2.2-2.2V2.2c0-1.2 1-2.2 2.2-2.2h13.4c7.8 0 12.9 2.1 18 7.6s7.1 12.3 7.1 21.7v14.2c0 2.2.1 4 .2 5.7v2.2c.5 3.2 1.8 6.2 3.6 8.9 2.8 4.5 7.1 10.7 11.3 13.7l.3.3.2.3h.1v.3c.1.3.1.7 0 1v.3h-.1l-.2.3-.3.3c-4.2 3.1-8.5 9.3-11.3 13.7-1.8 2.7-3.1 5.7-3.6 8.9v2.2c-.1 1.6-.2 3.5-.2 5.7v14.3c0 9.4-2.4 16.7-7.1 21.7s-10.2 7.6-18 7.6h-13.4c-1.2 0-2.2-1-2.2-2.2V140c0-1.2 1-2.2 2.2-2.2h12.7c4.4 0 7.5-1 9.2-3s2.7-5.6 2.7-10.5v-22.4c-.2-6.3 1.6-12.6 5.1-17.9 1.6-2.5 3.5-4.7 5.7-6.6.9-.7 1.1-2 .4-2.9-.2-.2-.3-.3-.4-.5z"></path></svg> <p>Visit okta.com</p></a></div> <div class="footer--links"><h4>Social</h4> <ul><li><i><svg viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></i> <a href="http://github.com/oktadeveloper">GitHub</a></li><li><i><svg viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></i> <a href="http://twitter.com/OktaDev">Twitter</a></li><li><i><svg viewBox="0 0 576 512"><path d="M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"/></svg></i> <a href="https://devforum.okta.com/">Forum</a></li><li><i><svg viewBox="0 0 448 512"><path d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg></i> <a href="http://feeds.feedburner.com/OktaBlog">RSS Blog</a></li><li><i><svg viewBox="0 0 576 512"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg></i> <a href="https://www.youtube.com/channel/UC5AMiWqFVFxF1q9Ya1FuZ_Q/featured">YouTube</a></li></ul></div><div class="footer--links"><h4>More Info</h4> <ul><li><!----> <a href="https://developer.okta.com/integrate-with-okta/">Integrate With Okta</a></li><li><!----> <a href="https://developer.okta.com/blog/">Blog</a></li><li><!----> <a href="https://developer.okta.com/docs/release-notes/">Release Notes</a></li><li><!----> <a href="https://developer.okta.com/3rd_party_notices/">3rd Party Notices</a></li><li><!----> <a href="https://toolkit.okta.com/">Community Toolkit</a></li></ul></div><div class="footer--links"><h4>Contact &amp; Legal</h4> <ul><li><!----> <a href="https://developer.okta.com/contact/">Contact Our Team</a></li><li><!----> <a href="https://developer.okta.com/contact-sales-enterprise/">Contact Sales</a></li><li><!----> <a href="mailto:developers@okta.com">Contact Support</a></li><li><!----> <a href="https://developer.okta.com/terms/">Terms &amp; Conditions</a></li><li><!----> <a href="https://developer.okta.com/privacy/">Privacy Policy</a></li></ul></div></footer></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.97e20113.js" defer></script><script src="/assets/js/286.5ad5d4ac.js" defer></script><script src="/assets/js/302.8832545f.js" defer></script><script src="/assets/js/301.33c4bfb3.js" defer></script><script src="/assets/js/295.020bfe96.js" defer></script><script src="/assets/js/278.9ab268b5.js" defer></script><script src="/assets/js/284.2ecc6fd0.js" defer></script><script src="/assets/js/298.ba603004.js" defer></script><script src="/assets/js/288.b3f1512a.js" defer></script><script src="/assets/js/873.9c5ae40d.js" defer></script><script src="/assets/js/291.797a3451.js" defer></script><script src="/assets/js/283.caea532a.js" defer></script><script src="/assets/js/297.f905e08d.js" defer></script>
  </body>
</html>
